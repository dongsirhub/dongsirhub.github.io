# 5、聚簇索引与非聚簇索引区别

**都是B+树的数据结构**

**聚簇索引****: **将数据存储与索引放到了一块、并且是按照一定的顺序组织的，找到索引也就找到了数据，数据的物理存放顺序与索引顺序是一致的，即:只要索引是相邻的， 那么对应的数据一定也是相邻地存放在磁盘上的

**非聚簇索引：**叶子节点不存储数据、存储的是数据行地址，也就是说根据索引查找到数据行的位置再取磁盘查找数据，这个就有点类似一本书的目录，比如我们要找第三章第一节，那我们先在这个目录里面找，找到对应的页码后再去对应的页码看文章。

**优势****:**

l 1、查询通过聚簇索引可以直接获取数据，相比非聚簇索引需要第二次查询(非覆盖索引的情况下)效率要高

l 2、聚簇索引对于范围查询的效率很高，因为其数据是按照大小排列的



l 3、聚簇索引适合用在排序的场合，非聚簇索引不适合**劣势：**

l 维护索引很昂贵，特别是插入新行或者主键被更新导至要分页(pagesplit)的时候。

建议在大量插入新行后，选在负载较低的时间段，通过OPTIMIZETABLE 优化表，因为必须被移动的行数据可能造成碎片。使用独享表空间可以弱化碎片

l 表因为使用uuId(随机ID)作为主键，使数据存储稀疏，这就会出现聚簇索引有可能有比全表扫面更慢，所以建议使用int 的auto_increment 作为主键

l 如果主键比较大的话，那辅助索引将会变的更大，因为辅助索引的叶子存储的是主键值，过长的主键值，会导致非叶子节点占用占用更多的物理空间



> 更新: 2024-05-01 16:16:40  
> 原文: <https://www.yuque.com/zhichangzhishiku/edrbqg/rk6zsothypf2ssep>