# 19、简述 java 内存分配与回收策略以及 Minor GC 和Major GC（full GC

**l 内存分配**

**栈区**：栈分为java 虚拟机栈和本地方法栈

**堆区**：堆被所有线程共享区域，在虚拟机启动时创建，唯一目的存放对象实例。堆区是gc 的主要区域，通常情况下分为两个区块年轻代和年老代。更细一点年轻代又分为Eden 区，主要放新创建对象，From survivor 和To survivor 保存gc 后幸存下的对象，默认情况下各自占比8:1:1。

**方法区**：被所有线程共享区域，用于存放已被虚拟机加载的类信息，常量，静态变量等数据。被Java 虚拟机描述为堆的一个逻辑部分。习惯是也叫它永久代

（permanment generation）

**程序计数器**：当前线程所执行的行号指示器。通过改变计数器的值来确定下一条指令，比如循环，分支，跳转，异常处理，线程恢复等都是依赖计数器来完成。线程私有的。

**l**** ****回收策略以及****Minor**** ****GC**** ****和****Major**** ****GC**

● 对象优先在堆的Eden 区分配



● 大对象直接进入老年代



● 长期存活的对象将直接进入老年代



当Eden 区没有足够的空间进行分配时，虚拟机会执行一次Minor GC.Minor GC 通常发生在新生代的Eden 区，在这个区的对象生存期短，往往发生GC 的频率较高，回收速度比较快;Full Gc/Major GC 发生在老年代，一般情况下，触发老年代GC 的时候不会触发Minor GC,但是通过配置，可以在Full GC 之前进行一次Minor GC 这样可以加快老年代的回收速度。



> 更新: 2024-04-30 18:39:49  
> [原文](https://www.yuque.com/zhichangzhishiku/edrbqg/rga0g2xbmqrwbuni>