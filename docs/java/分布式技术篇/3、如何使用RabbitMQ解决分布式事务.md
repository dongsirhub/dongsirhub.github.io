# 3、如何使用 RabbitMQ 解决分布式事务

**分布式事务：**不同的服务操作不同的数据源（库或表），保证数据一致性的问题。

**解决：**采用RabbitMQ 消息最终一致性的解决方案，解决分布式事务问题。分布式事务场景：

1、电商项目中的商品库和ES 库数据同步问题。

2、电商项目中：支付----!订单---!库存，一系列操作，进行状态更改等。

在互联网应用中，基本都会有用户注册的功能。在注册的同时，我们会做出如下操作：

收集用户录入信息，保存到数据库向用户的手机或邮箱发送验证码等等…

如果是传统的集中式架构，实现这个功能非常简单：开启一个本地事务，往本地数据库中插入一条用户数据，发送验证码，提交事物。

但是在分布式架构中，用户和发送验证码是两个独立的服务，它们都有各自的数据

库，那么就不能通过本地事物保证操作的原子性。这时我们就需要用到RabbitMQ（消息队列）来为我们实现这个需求。

在用户进行注册操作的时候，我们为该操作创建一条消息，当用户信息保存成功时， 把这条消息发送到消息队列。验证码系统会监听消息，一旦接受到消息，就会给该用户发送验证码。

> 更新: 2024-05-01 16:31:47  
